// import { NextRequest, NextResponse } from 'next/server';
// import { getUserFromAccessToken } from '@/shared/services/auth/auth-service';
// import { UserRole } from '@prisma/client';
// import { ACCESS_TOKEN_COOKIE } from '@/shared/config';

// export const runtime = 'nodejs';
// export async function middleware(req: NextRequest) {
//   const url = req.nextUrl.clone();

//   const accessToken = req.cookies.get(ACCESS_TOKEN_COOKIE)?.value;

//   if (!accessToken) {
//     url.pathname = '/';
//     return NextResponse.redirect(url);
//   }

//   const user = await getUserFromAccessToken(accessToken);
//   if (!user) {
//     url.pathname = '/';
//     return NextResponse.redirect(url);
//   }

//   if (url.pathname === '/admin-dashboard' && user.role !== UserRole.ADMIN) {
//     url.pathname = '/dashboard';
//     return NextResponse.redirect(url);
//   }

//   if (url.pathname === '/dashboard' && user.role === UserRole.ADMIN) {
//     url.pathname = '/admin-dashboard';
//     return NextResponse.redirect(url);
//   }
//   return NextResponse.next();
// }

// export const config = {
//   matcher: ['/admin-dashboard', '/dashboard'],
// };
